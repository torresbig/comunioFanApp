
<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Kontost√§nde der Nutzer</title>
<style>
  /* Grundlegende Styles */
  body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f9f9f9; }
  h1 { margin-bottom: 20px; text-align:center; }
  /* Zur√ºck-Button oben links */
  #btnBack {
    position: fixed;
    top: 20px;
    left: 20px;
    padding: 8px 14px;
    font-size: 1em;
    background: #3498dbcc;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    transition: background-color 0.3s;
    z-index: 3000;
  }
  #btnBack:hover {
    background: #2177bbcc;
  }
  /* Tabelle */
  table { border-collapse: collapse; width: 100%; max-width: 900px; margin: 50px auto 20px; background: white; }
  th, td { border: 1px solid #ddd; padding: 10px; text-align: right; }
  th { background-color: #3498db; color: white; cursor: pointer; user-select: none; }
  th:nth-child(2), td:nth-child(2) { text-align: left; }
  tr:hover { background-color: #f1f1f1; }
  #loading { margin: 15px; text-align:center; font-style: italic; }
  .asc::after { content: " ‚ñ≤"; }
  .desc::after { content: " ‚ñº"; }

  /* Hamburger-Men√º Styles */
  .hamburger-menu {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 3000;
  }
  .hamburger-button {
    background: #2c3e50;
    border: none;
    width: 48px;
    height: 48px;
    border-radius: 10px;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    transition: all 0.3s;
  }
  .hamburger-button:hover { background: #34495e; }
  .hamburger-line {
    width: 27px;
    height: 3px;
    background: #fff;
    margin: 3px 0;
    border-radius: 2px;
    transition: 0.3s;
  }
  .hamburger-button.active .hamburger-line:nth-child(1) {
      transform: rotate(-45deg) translate(-5px, 7px);
  }
  .hamburger-button.active .hamburger-line:nth-child(2) { opacity: 0; }
  .hamburger-button.active .hamburger-line:nth-child(3) {
      transform: rotate(45deg) translate(-5px, -7px);
  }
  .hamburger-dropdown {
      position: absolute;
      top: 56px;
      right: 0;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.18);
      min-width: 210px;
      display: none;
      overflow: hidden;
      padding-bottom:6px;
  }
  .hamburger-dropdown.show { display: block; animation: slideIn 0.25s;}
  @keyframes slideIn { from {opacity:0; transform:translateY(-12px);} to {opacity:1; transform:translateY(0);} }
  .menu-item {
      display: block;
      padding: 15px 20px;
      text-decoration: none;
      color: #34495e;
      border-bottom: 1px solid #efefef;
      transition: background 0.27s;
      font-weight: 500;
  }
  .menu-item:hover { background: #f4f7f9; color:#111 !important;}
  .menu-item:last-child { border-bottom: none; }
  .menu-tarn {
      font-size: 12px;
      color: #bcbcbc !important;
      font-style: italic;
      text-align: right;
      padding: 4px 12px 2px 0;
      border: none; background: transparent;
      user-select: none;
      pointer-events: auto;
      transition: none;
      cursor: default !important;
  }
  .menu-tarn.activated {
      color:#e74c3c !important; font-style:normal;font-weight:bold;
  }
  .menu-tarn:hover,
  .menu-tarn:active,
  .menu-tarn:focus {
      background: transparent !important;
      color: #bcbcbc !important;
      outline: none;
      cursor: default !important;
  }
  /* Debug Button */
  #floatingDebugBtn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 3000;
      background: #3498dbcc;
      color: white;
      border: none;
      border-radius: 50%;
      width: 38px;
      height: 38px;
      font-size: 1.3em;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.10);
      opacity: 0.5;
      transition: opacity 0.2s, background 0.2s;
  }
  #floatingDebugBtn:hover {
      opacity: 1;
      background: #217dbbcc;
  }
  #floatingDebugPanel {
      position: fixed;
      bottom: 68px;
      right: 12px;
      width: 340px;
      max-height: 400px;
      background: #f0f8ff;
      border: 1px solid #cce;
      border-radius: 8px;
      box-shadow: 0 4px 24px rgba(0, 0, 0, 0.18);
      z-index: 2999;
      display: none;
      flex-direction: column;
  }
  #floatingDebugPanel.open {
      display: flex;
  }
  #floatingDebugPanelHeader {
      background: #3498db;
      color: white;
      padding: 10px 16px;
      border-radius: 8px 8px 0 0;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: space-between;
  }
  #floatingDebugPanelClose {
      background: none;
      border: none;
      color: white;
      font-size: 1.2em;
      cursor: pointer;
  }
  #floatingDebugContent {
      padding: 12px;
      font-family: monospace;
      font-size: 12px;
      line-height: 1.5;
      overflow-y: auto;
      background: #f0f8ff;
      border-radius: 0 0 8px 8px;
      flex: 1;
  }
</style>
</head>
<body>

<button id="btnBack" title="Zur√ºck">‚Üê Zur√ºck</button>

<h1>Kontost√§nde der Nutzer</h1>
<div id="loading">Daten werden geladen, bitte warten...</div>
<table id="kontostandTable" style="display:none;">
  <thead>
    <tr>
      <th data-sort="number">#</th>
      <th data-sort="string">Nutzer</th>
      <th data-sort="number">Kontostand (‚Ç¨)</th>
      <th data-sort="number">Mannschaftswert (‚Ç¨)</th>
      <th data-sort="number">Gesamtwert (‚Ç¨)</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<!-- Hamburger-Men√º -->
<div class="hamburger-menu">
  <button class="hamburger-button" id="hamburgerButton">
    <div class="hamburger-line"></div>
    <div class="hamburger-line"></div>
    <div class="hamburger-line"></div>
  </button>
  <div class="hamburger-dropdown" id="hamburgerDropdown">
    <a href="transfermarkt.html" class="menu-item">üè™ Transfermarkt</a>
    <a href="Userdatenbank.html" class="menu-item">üë§ Userdatenbank</a>
    <a href="https://www.instagram.com/comuniofanapp/." class="menu-item" target="_blank">üì∏ Instagram: ComunioFanApp</a>
    <div class="menu-tarn" id="menuTarnItem">erstellt von comunioFanApp</div>
  </div>
</div>

<!-- Debug Button -->
<button id="floatingDebugBtn" title="Debug">üêû</button>
<div id="floatingDebugPanel">
  <div id="floatingDebugPanelHeader">
    Debug-Informationen
    <button id="floatingDebugPanelClose" title="Schlie√üen">√ó</button>
  </div>
  <div id="floatingDebugContent"></div>
</div>

<script>
// Zur√ºck-Button Funktionalit√§t
document.getElementById('btnBack').addEventListener('click', () => {
  window.location.href = 'index.html';
});

// Hamburger-Men√º Steuerung
const hamburgerButton = document.getElementById('hamburgerButton');
const hamburgerDropdown = document.getElementById('hamburgerDropdown');
const menuTarnItem = document.getElementById('menuTarnItem');
hamburgerButton.addEventListener('click', e => {
  e.stopPropagation();
  hamburgerButton.classList.toggle('active');
  hamburgerDropdown.classList.toggle('show');
});
menuTarnItem.addEventListener('click', () => {
  let clicks = menuTarnItem.dataset.clicks ? parseInt(menuTarnItem.dataset.clicks) : 0;
  clicks++;
  menuTarnItem.dataset.clicks = clicks;
  setTimeout(() => menuTarnItem.dataset.clicks = 0, 3000);
  if(clicks === 5){
    window.location.href = 'kontostaende.html';
  }
});
document.addEventListener('click', e => {
  if (!e.target.closest('.hamburger-menu')) {
    hamburgerButton.classList.remove('active');
    hamburgerDropdown.classList.remove('show');
  }
});
document.addEventListener('keydown', e => {
  if(e.key === 'Escape'){
    hamburgerButton.classList.remove('active');
    hamburgerDropdown.classList.remove('show');
  }
});

// Debug Button und Panel
const debugBtn = document.getElementById('floatingDebugBtn');
const debugPanel = document.getElementById('floatingDebugPanel');
const debugClose = document.getElementById('floatingDebugPanelClose');
const debugContent = document.getElementById('floatingDebugContent');
debugBtn.addEventListener('click', () => {
  debugPanel.classList.toggle('open');
});
debugClose.addEventListener('click', () => {
  debugPanel.classList.remove('open');
});
// Beispiel Debug ausgabe
function addDebug(msg){
  const d = document.createElement('div');
  d.textContent = `${new Date().toLocaleTimeString()}: ${msg}`;
  debugContent.appendChild(d);
  debugContent.scrollTop = debugContent.scrollHeight;
}

// Laden der Daten und Tabellenerstellung wie vorher (hier ein Beispiel weil du die JSON extern hast)
const urlPlayers = 'https://raw.githubusercontent.com/torresbig/comunioFanApp/main/data/SpielerdatenbankNeutralJson.txt';
const urlPlayerToUserMap = 'https://raw.githubusercontent.com/torresbig/comunioFanApp/main/data/PlayerToUserMap_884691.txt';
const urlUsers = 'https://raw.githubusercontent.com/torresbig/comunioFanApp/main/data/UserdatenbankJson_884691.txt';

// Die hier aufgef√ºhrte Funktion zum laden und rendern kannst du aus der vorherigen Antwort √ºbernehmen.

async function loadData() {
  document.getElementById('loading').style.display = 'block';
  try {
    const [usersRes, playersRes, mapRes] = await Promise.all([
      fetch(urlUsers), fetch(urlPlayers), fetch(urlPlayerToUserMap)
    ]);
    if (!usersRes.ok || !playersRes.ok || !mapRes.ok) {
      alert('Fehler beim Laden der Spieldaten.');
      return;
    }
    const usersData = await usersRes.json();
    const playersData = await playersRes.json();
    const playerToUserMap = await mapRes.json();

    buildTable(usersData, playersData, playerToUserMap);
  } catch(err) {
    alert('Fehler: ' + err.message);
  } finally {
    document.getElementById('loading').style.display = 'none';
    document.getElementById('kontostandTable').style.display = '';
  }
}

// buildTable und sortierfunktionen aus vorheriger Antwort hier einsetzen ...

document.addEventListener('DOMContentLoaded', () => {
  loadData();
});
</script>
</body>
</html>
