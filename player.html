<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Spieler Details</title>
<style>
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; color: #333; padding-bottom: 140px; margin: 0;}
    .navbar { background: linear-gradient(135deg, #34495e, #2c3e50); color: white; padding: 10px 15px; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 5px rgba(0,0,0,0.2);}
    .player-header { display: flex; justify-content: space-between; align-items: center; width: 100%; max-width: 1200px; margin: 0 auto; padding: 10px 0;}
    .player-center { display: flex; flex-direction: column; align-items: center; flex: 1;}
    .player-row { display: flex; align-items: center; gap: 12px; justify-content: center;}
    .club-logo { width: 44px; height: 44px; border-radius: 50%; background: #3498db; overflow: hidden; flex-shrink: 0; display: flex; align-items: center; justify-content: center;}
    .club-logo img { width: 100%; height: 100%; object-fit: contain;}
    .player-name { font-size: 22px; font-weight: bold; color: white; text-decoration: none; line-height: 1.1;}
    .player-name:hover { text-decoration: underline;}
    .player-id { font-size: 13px; color: #aaa; margin-top: 2px; text-align: left; width: 100%;}
    .status-wrapper { display: flex; flex-direction: column; align-items: center; justify-content: center; flex-shrink: 0; gap: 2px;}
    .status-label { font-size: 12px; color: #aaa;}
    .status-indicator { font-size: 26px; cursor: help; transition: opacity 0.2s;}
    .status-indicator:hover { opacity: 0.8;}
    .container { max-width: 1200px; margin: 0 auto; padding: 15px;}
    .info-card { background: rgba(255,255,255,0.95); border-radius: 10px; padding: 15px 20px 10px 20px; margin-bottom: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);}
    .info-card h3 { margin-bottom: 12px; color: #2c3e50; border-bottom: 2px solid #3498db; padding-bottom: 5px; font-size: 16px; display: flex; align-items: center; gap: 8px; cursor: pointer; user-select: none;}
    .info-card h3:after { content: "‚ñº"; font-size: 0.8em; margin-left: 10px; display: inline-block; transition: transform 0.2s;}
    .info-card h3.collapsed:after { transform: rotate(-90deg);}
    .info-card .stat-icon { width: 22px; height: 22px; vertical-align: middle; margin-right: 6px; }
    .info-card-content { overflow: hidden; max-height: 1000px; transition: max-height 0.3s ease-out;}
    .info-card-content.collapsed { max-height: 0;}
    .info-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 5px 0; border-bottom: 1px solid #eee;}
    .info-row:last-child { border-bottom: none;}
    .info-label { font-weight: 600; color: #7f8c8d; font-size: 13px; flex: 1;}
    .info-value { font-weight: 600; color: #2c3e50; font-size: 13px; flex: 1; text-align: right;}
    .attributes { display: flex; flex-wrap: wrap; gap: 5px; margin-top: 10px;}
    .attribute-tag { background: linear-gradient(135deg, #9b59b6, #8e44ad); color: white; padding: 4px 8px; border-radius: 15px; font-size: 12px; font-weight: 600;}
    .tabs { display: flex; justify-content: center; margin: 20px 0 0 0; border-bottom: 1px solid #ddd;}
    .tab-button { position:relative; padding: 10px 20px; background: #2c3e50; color: white; border: none; cursor: pointer; font-size: 22px; margin: 0 5px; border-radius: 16px 16px 0 0; transition: background 0.3s; display: flex; align-items: center;}
    .tab-button.active { background: #3498db;}
    .tab-button .trend-arrow { display: flex; align-items: center; margin-left: 7px;}
    .tab-content { display: none; padding: 15px; background: rgba(255,255,255,0.95); border-radius: 0 0 10px 10px;}
    .tab-content.active { display: block;}
    .market-month-block { margin: 18px 0 8px 0; padding: 0; border-radius: 8px; background: #f9f9ff;}
    .market-month-header { font-weight: 600; font-size: 15px; display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 10px 12px; border-radius: 8px 8px 0 0; background: #e3e7fa; user-select: none;}
    .market-month-header:after { content: "‚ñº"; font-size: 0.8em; margin-left: auto; transition: transform 0.2s;}
    .market-month-header.collapsed:after { transform: rotate(-90deg);}
    .market-month-avg { font-weight: 400; font-size: 13px; color: #444; display: flex; align-items: center; gap: 4px;}
    .market-avg-icon { width: 18px; height: 18px; display: inline-block; vertical-align: middle; }
    .market-list { display: flex; flex-direction: column; gap: 6px; margin-bottom: 8px; padding: 0 12px; overflow: hidden; max-height: 1000px; transition: max-height 0.3s ease-out;}
    .market-list.collapsed { max-height: 0; padding: 0 12px; margin-bottom: 0;}
    .market-list-row { display: flex; justify-content: space-between; align-items: center; background: #f6f8fa; border-radius: 6px; padding: 7px 12px;}
    .market-list-date { font-size: 13px; color: #777;}
    .market-list-value { font-size: 14px; font-weight: 500;}
    .trend-mini { font-size: 1em; vertical-align: middle; margin-left: 4px; }
    .trend-up { color: #27ae60;}
    .trend-down { color: #e74c3c;}
    .trend-eq { color: #888;}
    .rivals-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 2px 12px rgba(0,0,0,0.08);
        font-size: 15px;
    }
    .rivals-table th, .rivals-table td {
        padding: 12px 10px;
        text-align: left;
        border-bottom: 1px solid #eee;
        font-size: 13px;
    }
    .rivals-table th {
        background-color: #2c3e50;
        color: white;
        font-weight: 600;
        cursor: pointer;
        user-select: none;
        position: relative;
        padding-right: 25px;
    }
    .rivals-table th:hover {
        background-color: #34495e;
    }
    .rivals-table tr:nth-child(even) { background-color: #f9f9f9; }
    .rivals-table tr:hover { background-color: #f1f7ff; }
    .player-name-cell { font-weight: 600; color: #2c3e50; }
    .player-id-cell { font-size: 11px; color: #aaa; margin-top: 2px; }
    .sort-arrow {
        position: absolute; right: 8px; top: 50%; transform: translateY(-50%); font-size: 12px;
    }
    .player-link { color: #3498db; text-decoration: underline; }
    .player-link:hover { color: #217dbb; }
    /* Punkte-Tabelle */
    .points-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
        background: #f9f9ff;
        border-radius: 10px;
        overflow: hidden;
        font-size: 15px;
    }
    .points-table th, .points-table td {
        padding: 10px;
        text-align: center;
        border-bottom: 1px solid #e3e7fa;
    }
    .points-table th {
        background: #e3e7fa;
        color: #2c3e50;
        font-weight: 600;
    }
    .points-table tr:nth-child(even) { background: #f6f8fa; }
    .points-table tr:hover { background: #eef2fa; }
    .matchday-cell { font-weight: 600; color: #2c3e50; }
    .points-cell { font-weight: 600; color: #27ae60; }
    @media (max-width: 600px) {
        .container { padding: 5px; }
        .market-month-header { font-size: 14px; }
        .market-list-row { font-size: 13px; padding: 6px 8px; }
        .player-name { font-size: 16px; }
        .club-logo { width: 34px; height: 34px; }
        .tab-button { font-size: 16px; }
    }
</style>
</head>
<body>
<nav class="navbar">
    <button class="back-btn" onclick="window.history.back()">‚Üê Zur√ºck</button>
    <div class="player-header">
        <div class="player-center">
            <div class="player-row">
                <div class="club-logo" id="clubLogo"></div>
                <div>
                    <a href="#" id="playerNameLink" class="player-name" target="_blank">Lade Spieler...</a>
                    <div id="playerId" class="player-id"></div>
                </div>
            </div>
        </div>
        <div class="status-wrapper">
            <div class="status-label">Status</div>
            <div id="statusIndicator" class="status-indicator"></div>
        </div>
    </div>
</nav>
<div class="container">
    <div id="errorMessage" class="error-message" style="display:none; color: red; font-weight: bold; margin-bottom: 10px;"></div>
    <div id="loadingIndicator" class="loading-spinner" style="text-align:center; padding: 20px;">Lade Daten...</div>
    <div id="playerContent" style="display:none;">
        <div class="info-card">
            <h3>üìã Spieler-Informationen</h3>
            <div class="info-card-content">
                <div class="info-row"><span class="info-label">Geburtstag:</span><span class="info-value" id="birthday">-</span></div>
                <div class="info-row"><span class="info-label">Alter:</span><span class="info-value" id="age">-</span></div>
                <div class="info-row"><span class="info-label">Gr√∂√üe:</span><span class="info-value" id="height">-</span></div>
                <div class="info-row"><span class="info-label">Nationalit√§t:</span><span class="info-value" id="nationality">-</span></div>
                <div class="info-row"><span class="info-label">Position:</span><span class="info-value" id="position">-</span></div>
                <div class="info-row"><span class="info-label">Hauptfu√ü:</span><span class="info-value" id="foot">-</span></div>
                <div class="info-row"><span class="info-label">Trikotnummer:</span><span class="info-value" id="jerseyNumber">-</span></div>
            </div>
        </div>
        <div class="info-card">
            <h3>‚öΩ Comunio</h3>
            <div class="info-card-content">
                <div class="info-row"><span class="info-label">Position:</span><span class="info-value" id="comunioPosition">-</span></div>
                <div class="info-row"><span class="info-label">Marktwert:</span><span class="info-value" id="marketValue">-</span></div>
                <div class="info-row"><span class="info-label">Punkte (letztes Jahr):</span><span class="info-value" id="lastYearPoints">-</span></div>
                <div class="info-row"><span class="info-label">Besitzer:</span><span class="info-value" id="owner">-</span></div>
            </div>
        </div>
        <div class="info-card">
            <h3>
                <svg class="stat-icon" viewBox="0 0 24 24" fill="none"><rect x="3" y="13" width="3" height="8" rx="1" fill="#764ba2"/><rect x="8" y="9" width="3" height="12" rx="1" fill="#764ba2"/><rect x="13" y="5" width="3" height="16" rx="1" fill="#764ba2"/><rect x="18" y="2" width="3" height="19" rx="1" fill="#764ba2"/></svg>
                Status & Statistik
            </h3>
            <div class="info-card-content">
                <div class="info-row"><span class="info-label">Status:</span><span class="info-value" id="detailStatus">-</span></div>
                <div class="info-row"><span class="info-label">Spiele:</span><span class="info-value" id="gamesPlayed">-</span></div>
                <div class="info-row"><span class="info-label">Tore:</span><span class="info-value" id="goals">-</span></div>
                <div class="info-row"><span class="info-label">Notenschnitt:</span><span class="info-value" id="averageRating">-</span></div>
                <div class="info-row"><span class="info-label">Gelbe Karten:</span><span class="info-value" id="yellowCards">-</span></div>
                <div class="info-row"><span class="info-label">Rote Karten:</span><span class="info-value" id="redCards">-</span></div>
            </div>
        </div>
        <div class="info-card" id="attributesCard" style="display:none;">
            <h3>‚≠ê Besondere Eigenschaften</h3>
            <div class="info-card-content">
                <div class="attributes" id="attributesList"></div>
            </div>
        </div>
        <div class="tabs" id="tabBar">
            <button class="tab-button" data-tab="rivals">Rivalen</button>
            <button class="tab-button" data-tab="market">Marktwerte <span id="marketTabTrend" class="trend-arrow"></span></button>
            <button class="tab-button" data-tab="points">Punkte</button>
        </div>
        <div id="rivals" class="tab-content">
            <h3 id="rivalsHeader">Direkte Konk
