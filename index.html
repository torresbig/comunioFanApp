<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spielerdaten Tabelle</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f9f9f9;
        }

        /* Debug Section - ganz oben */
        .debug-section {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 10px;
            margin-bottom: 20px;
            border-radius: 4px;
            font-size: 12px;
        }

        /* News Section */
        .news-section {
            background-color: #d1ecf1;
            border: 1px solid #bee5eb;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 4px;
        }

        .news-section h3 {
            margin-top: 0;
            color: #0c5460;
        }

        /* Filter Container - EINKLAPPBAR */
        .filter-container {
            background-color: #ffffff;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 20px;
        }

        .filter-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            background-color: #f8f9fa;
            border-bottom: 1px solid #ddd;
            cursor: pointer;
        }

        .filter-header h4 {
            margin: 0;
            color: #333;
        }

        .toggle-btn {
            background: none;
            border: none;
            font-size: 16px;
            cursor: pointer;
            color: #666;
        }

        .filter-content {
            padding: 15px;
            transition: max-height 0.3s ease;
            overflow: hidden;
        }

        .filter-content.collapsed {
            max-height: 0;
            padding: 0 15px;
        }

        .filter-row {
            margin-bottom: 15px;
        }

        .filter-row label {
            display: inline-block;
            width: 80px;
            font-weight: bold;
        }

        .filter-row input,
        .filter-row select {
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 3px;
            margin-left: 10px;
        }

        /* Debug Filter kleiner */
        #debugFilter {
            width: 100px;
        }

        /* Andere Filter normal */
        #nameFilter,
        #statusFilter,
        #levelFilter {
            width: 150px;
        }

        .filter-actions {
            margin-top: 15px;
        }

        .filter-actions button {
            margin-right: 10px;
            padding: 8px 15px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }

        .btn-apply {
            background-color: #007bff;
            color: white;
        }

        .btn-clear {
            background-color: #6c757d;
            color: white;
        }

        /* Table Styles */
        .table-container {
            background-color: #ffffff;
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow: hidden;
        }

        .table-header {
            background-color: #f8f9fa;
            padding: 15px;
            border-bottom: 1px solid #ddd;
        }

        .table-header h3 {
            margin: 0;
            color: #333;
        }

        #dataTable {
            width: 100%;
            border-collapse: collapse;
        }

        #dataTable th,
        #dataTable td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        #dataTable th {
            background-color: #f8f9fa;
            font-weight: bold;
        }

        #dataTable tr:hover {
            background-color: #f5f5f5;
        }

        .status-active {
            color: green;
            font-weight: bold;
        }

        .status-inactive {
            color: red;
            font-weight: bold;
        }

        .stats {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <!-- 1. Debug Section (ganz oben) -->
    <div class="debug-section">
        <strong>Debug:</strong> Version 1.2.3 | Status: Aktiv | Datensätze: <span id="debugCount">0</span> | Update: <span id="debugTime">-</span>
    </div>

    <!-- 2. News Section -->
    <div class="news-section">
        <h3>Aktuelle Nachrichten</h3>
        <p><strong>System Update:</strong> Neue Filterfunktionen wurden hinzugefügt.</p>
        <p><strong>Wartung:</strong> Geplante Wartungsarbeiten am Wochenende.</p>
    </div>

    <!-- 3. Einklappbares Filter Panel -->
    <div class="filter-container">
        <div class="filter-header" onclick="toggleFilter()">
            <h4>Filter & Suchoptionen</h4>
            <button class="toggle-btn" id="toggleIcon">▼</button>
        </div>
        <div class="filter-content" id="filterContent">
            <div class="filter-row">
                <label for="debugFilter">Debug:</label>
                <input type="text" id="debugFilter" placeholder="Debug...">
            </div>
            <div class="filter-row">
                <label for="nameFilter">Name:</label>
                <input type="text" id="nameFilter" placeholder="Name suchen...">
            </div>
            <div class="filter-row">
                <label for="statusFilter">Status:</label>
                <select id="statusFilter">
                    <option value="">Alle</option>
                    <option value="Aktiv">Aktiv</option>
                    <option value="Inaktiv">Inaktiv</option>
                    <option value="Ausstehend">Ausstehend</option>
                </select>
            </div>
            <div class="filter-row">
                <label for="levelFilter">Level:</label>
                <select id="levelFilter">
                    <option value="">Alle</option>
                    <option value="1">Level 1</option>
                    <option value="2">Level 2</option>
                    <option value="3">Level 3</option>
                    <option value="4">Level 4</option>
                    <option value="5">Level 5</option>
                </select>
            </div>
            <div class="filter-actions">
                <button class="btn-apply" onclick="applyFilters()">Filter anwenden</button>
                <button class="btn-clear" onclick="clearFilters()">Zurücksetzen</button>
            </div>
        </div>
    </div>

    <!-- 4. Tabelle -->
    <div class="table-container">
        <div class="table-header">
            <h3>Spielerdaten</h3>
            <div class="stats">
                <span id="visibleCount">0</span> von <span id="totalCount">0</span> Einträgen
            </div>
        </div>
        <table id="dataTable">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Status</th>
                    <th>Level</th>
                    <th>Punkte</th>
                    <th>Registriert</th>
                    <th>Debug</th>
                </tr>
            </thead>
            <tbody id="tableBody">
                <!-- Spielerdaten werden hier geladen -->
            </tbody>
        </table>
    </div>

    <script>
        // Original Spielerdaten
        const playerData = [
            { id: 1, name: "Max Mustermann", status: "Aktiv", level: 5, points: 1250, registered: "2025-01-15", debug: "usr001" },
            { id: 2, name: "Anna Schmidt", status: "Inaktiv", level: 3, points: 890, registered: "2025-02-20", debug: "usr002" },
            { id: 3, name: "Peter Wilson", status: "Aktiv", level: 4, points: 1100, registered: "2025-01-30", debug: "usr003" },
            { id: 4, name: "Lisa Müller", status: "Ausstehend", level: 2, points: 650, registered: "2025-03-10", debug: "usr004" },
            { id: 5, name: "Tom Brown", status: "Aktiv", level: 5, points: 1450, registered: "2025-01-05", debug: "usr005" },
            { id: 6, name: "Sarah Johnson", status: "Inaktiv", level: 1, points: 200, registered: "2025-04-12", debug: "usr006" },
            { id: 7, name: "Michael Davis", status: "Aktiv", level: 3, points: 980, registered: "2025-02-28", debug: "usr007" },
            { id: 8, name: "Emma Wilson", status: "Aktiv", level: 4, points: 1350, registered: "2025-01-18", debug: "usr008" }
        ];

        let filteredData = [...playerData];

        // Initialisierung
        document.addEventListener('DOMContentLoaded', function() {
            loadPlayerData();
            setupFilterListeners();
            updateDebugInfo();
        });

        // NEUE FUNKTION: Filter ein-/ausklappen
        function toggleFilter() {
            const filterContent = document.getElementById('filterContent');
            const toggleIcon = document.getElementById('toggleIcon');
            
            filterContent.classList.toggle('collapsed');
            
            if (filterContent.classList.contains('collapsed')) {
                toggleIcon.textContent = '▶';
            } else {
                toggleIcon.textContent = '▼';
            }
        }

        // Spielerdaten laden
        function loadPlayerData() {
            const tableBody = document.getElementById('tableBody');
            tableBody.innerHTML = '';
            
            filteredData.forEach(player => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${player.id}</td>
                    <td>${player.name}</td>
                    <td><span class="status-${player.status.toLowerCase()}">${player.status}</span></td>
                    <td>${player.level}</td>
                    <td>${player.points}</td>
                    <td>${player.registered}</td>
                    <td>${player.debug}</td>
                `;
                tableBody.appendChild(row);
            });
            
            updateStats();
        }

        // Filter Event Listeners
        function setupFilterListeners() {
            const filterInputs = document.querySelectorAll('#debugFilter, #nameFilter, #statusFilter, #levelFilter');
            
            filterInputs.forEach(input => {
                input.addEventListener('input', applyFilters);
                input.addEventListener('change', applyFilters);
            });
        }

        // Filter anwenden
        function applyFilters() {
            const debugFilter = document.getElementById('debugFilter').value.toLowerCase();
            const nameFilter = document.getElementById('nameFilter').value.toLowerCase();
            const statusFilter = document.getElementById('statusFilter').value;
            const levelFilter = document.getElementById('levelFilter').value;
            
            filteredData = playerData.filter(player => {
                const matchesDebug = !debugFilter || player.debug.toLowerCase().includes(debugFilter);
                const matchesName = !nameFilter || player.name.toLowerCase().includes(nameFilter);
                const matchesStatus = !statusFilter || player.status === statusFilter;
                const matchesLevel = !levelFilter || player.level.toString() === levelFilter;
                
                return matchesDebug && matchesName && matchesStatus && matchesLevel;
            });
            
            loadPlayerData();
            updateDebugInfo();
        }

        // Filter zurücksetzen
        function clearFilters() {
            document.getElementById('debugFilter').value = '';
            document.getElementById('nameFilter').value = '';
            document.getElementById('statusFilter').value = '';
            document.getElementById('levelFilter').value = '';
            
            filteredData = [...playerData];
            loadPlayerData();
            updateDebugInfo();
        }

        // Statistiken aktualisieren
        function updateStats() {
            document.getElementById('visibleCount').textContent = filteredData.length;
            document.getElementById('totalCount').textContent = playerData.length;
        }

        // Debug Info aktualisieren
        function updateDebugInfo() {
            document.getElementById('debugCount').textContent = filteredData.length;
            document.getElementById('debugTime').textContent = new Date().toLocaleTimeString('de-DE');
        }

        // Debug Info alle 5 Sekunden aktualisieren
        setInterval(updateDebugInfo, 5000);
    </script>
</body>
</html>
